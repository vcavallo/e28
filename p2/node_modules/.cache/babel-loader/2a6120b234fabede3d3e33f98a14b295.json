{"remainingRequest":"/home/vcavallo/code/e28/recipes/node_modules/thread-loader/dist/cjs.js!/home/vcavallo/code/e28/recipes/node_modules/babel-loader/lib/index.js!/home/vcavallo/code/e28/recipes/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vcavallo/code/e28/recipes/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vcavallo/code/e28/recipes/src/components/AddToListWidget.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vcavallo/code/e28/recipes/src/components/AddToListWidget.vue","mtime":1605649798334},{"path":"/home/vcavallo/code/e28/recipes/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vcavallo/code/e28/recipes/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vcavallo/code/e28/recipes/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vcavallo/code/e28/recipes/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vcavallo/code/e28/recipes/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGF4aW9zIH0gZnJvbSAiQC9hcGkuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsiY29tcG9uZW50SUQiXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIGdldHRpbmdMaXN0czogZmFsc2UsCiAgICAgIGxpc3RzOiBbXSwKICAgICAgZ290TGlzdHM6IGZhbHNlLAogICAgICBhZGRpbmdUb0xpc3Q6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHVudXNlZExpc3RzOiBmdW5jdGlvbiB1bnVzZWRMaXN0cygpIHsKICAgICAgLy8gVE9ETzogb25seSBzaG93IGxpc3RzIHRoYXQgZG9uJ3QgY29udGFpbiB0aGlzIGl0ZW0/CiAgICAgIHJldHVybiB0aGlzLmxpc3RzOyAvLyBnZXQgYWxsIHNob3BwaW5nX2xpc3RfaXRlbXMKICAgICAgLy8gb25seSByZXR1cm4gdGhlIG9uZXMgdGhhdCBoYXZlIHRoaXMgcmVjaXBlX2NvbXBvbmVudF9pZCBwcmVzZW50CiAgICAgIC8vIHdpdGhvdXQgbW9yZSByb2J1c3QgZGF0YWJhc2Ugam9pbnMgYW5kL29yIFZ1ZXgsIHRoaXMgd2lsbCBiZSB0b28gY29zdGx5LgogICAgfSwKICAgIHRvZ2dsZWRJY29uOiBmdW5jdGlvbiB0b2dnbGVkSWNvbigpIHsKICAgICAgaWYgKCF0aGlzLm9wZW4pIHsKICAgICAgICByZXR1cm4gJ2ZhLWxpc3QnOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnZmEtdGltZXMtY2lyY2xlJzsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TGlzdHM6IGZ1bmN0aW9uIGdldExpc3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjsKCiAgICAgIGlmICghdGhpcy5nb3RMaXN0cykgewogICAgICAgIHRoaXMuZ2V0dGluZ0xpc3RzID0gdHJ1ZTsKICAgICAgICBheGlvcy5nZXQoInNob3BwaW5nTGlzdCIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMubGlzdHMgPSByZXMuZGF0YS5zaG9wcGluZ0xpc3Q7CiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5nb3RMaXN0cyA9IHRydWU7CiAgICAgICAgICBfdGhpcy5nZXR0aW5nTGlzdHMgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFkZFRvTGlzdDogZnVuY3Rpb24gYWRkVG9MaXN0KGxpc3RJRCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoInNob3BwaW5nTGlzdEl0ZW0iLCB7CiAgICAgICAgc2hvcHBpbmdfbGlzdF9pZDogbGlzdElELAogICAgICAgIHJlY2lwZV9jb21wb25lbnRfaWQ6IHRoaXMuY29tcG9uZW50SUQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLm9wZW4gPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["AddToListWidget.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,KAAA,QAAA,UAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,aAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,YAAA,EAAA,KAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,KAJA;AAKA,MAAA,YAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA;AACA,aAAA,KAAA,KAAA,CAFA,CAIA;AACA;AACA;AACA,KARA;AASA,IAAA,WATA,yBASA;AACA,UAAA,CAAA,KAAA,IAAA,EAAA;AACA,eAAA,SAAA;AACA,OAFA,MAEA;AACA,eAAA,iBAAA;AACA;AACA;AAfA,GAXA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;;AAEA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA,QAAA,KAAA,CACA,GADA,CACA,cADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,YAAA;AACA,SAJA,EAKA,OALA,CAKA,YAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,SARA;AASA;AACA,KAhBA;AAiBA,IAAA,SAjBA,qBAiBA,MAjBA,EAiBA;AAAA;;AACA,MAAA,KAAA,CACA,IADA,CACA,kBADA,EACA;AACA,QAAA,gBAAA,EAAA,MADA;AAEA,QAAA,mBAAA,EAAA,KAAA;AAFA,OADA,EAKA,IALA,CAKA,YAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,KAAA;AACA,OAPA;AAQA;AA1BA;AA5BA,CAAA","sourcesContent":["<template>\n  <div style=\"display: inline-block\">\n    <i @click=\"getLists\" class=\"fas\" :class=\"toggledIcon\" style=\"padding: 3px\"></i>\n    <div v-if=\"open\">\n      <div class=\"lists-container\">\n        <div v-if=\"gettingLists\">...Finding shopping lists</div>\n        <div v-else>\n          <div v-if=\"lists.length === 0\">\n            You don't have any shopping lists yet!\n          </div>\n          <div v-else>\n            <div v-for=\"l in unusedLists\" :key=\"l.id\">\n              <span style=\"margin-right: 8px\">\n                <a href=\"#\" @click.prevent=\"addToList(l.id)\"\n                  >Add to {{ l.name }}</a\n                >\n              </span>\n\n              <a target=\"_blank\" :href=\"`/shopping-lists/${l.id}`\">\n                <i class=\"fas fa-external-link-square-alt\"></i>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { axios } from \"@/api.js\";\n\nexport default {\n  props: [\"componentID\"],\n  data() {\n    return {\n      open: false,\n      gettingLists: false,\n      lists: [],\n      gotLists: false,\n      addingToList: false,\n    };\n  },\n  computed: {\n    unusedLists() {\n      // TODO: only show lists that don't contain this item?\n      return this.lists;\n\n      // get all shopping_list_items\n      // only return the ones that have this recipe_component_id present\n      // without more robust database joins and/or Vuex, this will be too costly.\n    },\n    toggledIcon() {\n      if (!this.open) {\n        return 'fa-list'\n      } else {\n        return 'fa-times-circle'\n      }\n    }\n  },\n  methods: {\n    getLists() {\n      this.open = !this.open;\n\n      if (!this.gotLists) {\n        this.gettingLists = true;\n        axios\n          .get(\"shoppingList\")\n          .then((res) => {\n            this.lists = res.data.shoppingList;\n          })\n          .finally(() => {\n            this.gotLists = true;\n            this.gettingLists = false;\n          });\n      }\n    },\n    addToList(listID) {\n      axios\n        .post(\"shoppingListItem\", {\n          shopping_list_id: listID,\n          recipe_component_id: this.componentID,\n        })\n        .then(() => {\n          this.open = false;\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.lists-container {\n  position: fixed;\n  background: white;\n  z-index: 10000;\n  border: 1px dotted black;\n  border-radius: 3px;\n  box-shadow: 2px 2px 2px black;\n  padding: 8px;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}